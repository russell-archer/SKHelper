{"metadata":{"modules":[{"name":"SKHelper"}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"highestValueActiveSubscription"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"in"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"text":"Product","preciseIdentifier":"s:8StoreKit7ProductV","kind":"typeIdentifier"},{"kind":"text","text":"?"}],"title":"highestValueActiveSubscription(in:)","roleHeading":"Instance Method","externalID":"s:8SKHelperAAC30highestValueActiveSubscription2in8StoreKit7ProductVSgSS_tYaF","symbolKind":"method","platforms":[{"deprecated":false,"unavailable":false,"beta":false,"name":"iOS","introducedAt":"17.0"},{"deprecated":false,"beta":false,"introducedAt":"14.6","name":"macOS","unavailable":false}],"role":"symbol"},"schemaVersion":{"minor":3,"patch":0,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/SKHelper\/documentation\/SKHelper\/SKHelper\/highestValueActiveSubscription(in:)"},"sections":[],"hierarchy":{"paths":[["doc:\/\/SKHelper\/documentation\/SKHelper","doc:\/\/SKHelper\/documentation\/SKHelper\/SKHelper"]]},"kind":"symbol","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/skhelper\/skhelper\/highestvalueactivesubscription(in:)"]}],"abstract":[{"type":"text","text":"Return the highest service level auto-renewing subscription the user is subscribed to in the "},{"type":"codeVoice","code":"subscriptionGroup"},{"type":"text","text":"."}],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"@","kind":"attribute"},{"preciseIdentifier":"s:ScM","text":"MainActor","kind":"attribute"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"highestValueActiveSubscription"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"in"},{"text":" ","kind":"text"},{"text":"groupName","kind":"internalParam"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":") ","kind":"text"},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"text":"Product","kind":"typeIdentifier","preciseIdentifier":"s:8StoreKit7ProductV"},{"kind":"text","text":"?"}]}]},{"kind":"parameters","parameters":[{"name":"groupName","content":[{"inlineContent":[{"type":"text","text":"The name of the subscription group."}],"type":"paragraph"}]}]},{"content":[{"level":2,"text":"Return Value","anchor":"return-value","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Returns the "},{"code":"Product","type":"codeVoice"},{"type":"text","text":" for the highest service level auto-renewing subscription the user is subscribed to in the "},{"type":"codeVoice","code":"subscriptionGroup"},{"type":"text","text":", or nil if the user isn’t subscribed to a product in the group."}]}],"kind":"content"},{"content":[{"type":"heading","level":2,"text":"Discussion","anchor":"discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When getting information on the highest service level auto-renewing subscription the user is subscribed to we enumerate the "},{"type":"codeVoice","code":"Product.subscription.status"},{"text":" array that is a property of each ","type":"text"},{"type":"codeVoice","code":"Product"},{"type":"text","text":" in the group."},{"text":" ","type":"text"},{"text":"This array is empty if the user has never subscribed to a product in this subscription group. If the user is subscribed to a product the ","type":"text"},{"type":"codeVoice","code":"statusCollection.count"},{"type":"text","text":" should be at least 1."},{"text":" ","type":"text"},{"text":"Each ","type":"text"},{"type":"codeVoice","code":"Product"},{"type":"text","text":" in a subscription group provides access to the same "},{"code":"Product.SubscriptionInfo.Status","type":"codeVoice"},{"text":" array via its ","type":"text"},{"type":"codeVoice","code":"product.subscription.status"},{"type":"text","text":" property."}]},{"inlineContent":[{"type":"text","text":"Enumeration of the "},{"code":"SubscriptionInfo.Status","type":"codeVoice"},{"type":"text","text":" array is necessary because a user may have multiple active subscriptions to products in the same subscription group. For example, a user may have"},{"text":" ","type":"text"},{"type":"text","text":"subscribed themselves to the “Gold” product, as well as receiving an automatic subscription to the “Silver” product through family sharing. In this case, we’d need to return information on the “Gold” product."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Also, note that even if the "},{"type":"codeVoice","code":"Product.SubscriptionInfo.Status"},{"text":" collection does NOT contain a particular product ","type":"text"},{"type":"codeVoice","code":"Transaction.currentEntitlement(for:)"},{"text":" may still report that the user has an","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"entitlement. This can happen when upgrading or downgrading subscriptions. Because of this we always need to search the "},{"type":"codeVoice","code":"Product.SubscriptionInfo.Status"},{"type":"text","text":" collection for a subscribed product with a higher-value."}]}],"kind":"content"}],"references":{"doc://SKHelper/documentation/SKHelper/SKHelper":{"url":"\/documentation\/skhelper\/skhelper","navigatorTitle":[{"text":"SKHelper","kind":"identifier"}],"abstract":[{"type":"text","text":"SKHelper, a lightweight StoreKit helper."}],"identifier":"doc:\/\/SKHelper\/documentation\/SKHelper\/SKHelper","role":"symbol","title":"SKHelper","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SKHelper","kind":"identifier"}],"type":"topic","kind":"symbol"},"doc://SKHelper/documentation/SKHelper/SKHelper/highestValueActiveSubscription(in:)":{"role":"symbol","identifier":"doc:\/\/SKHelper\/documentation\/SKHelper\/SKHelper\/highestValueActiveSubscription(in:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"highestValueActiveSubscription","kind":"identifier"},{"text":"(","kind":"text"},{"text":"in","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Product","kind":"typeIdentifier","preciseIdentifier":"s:8StoreKit7ProductV"},{"text":"?","kind":"text"}],"title":"highestValueActiveSubscription(in:)","kind":"symbol","abstract":[{"type":"text","text":"Return the highest service level auto-renewing subscription the user is subscribed to in the "},{"type":"codeVoice","code":"subscriptionGroup"},{"type":"text","text":"."}],"url":"\/documentation\/skhelper\/skhelper\/highestvalueactivesubscription(in:)","type":"topic"},"doc://SKHelper/documentation/SKHelper":{"title":"SKHelper","role":"collection","identifier":"doc:\/\/SKHelper\/documentation\/SKHelper","url":"\/documentation\/skhelper","type":"topic","abstract":[{"code":"SKHelper","type":"codeVoice"},{"text":" is a Swift Package Manager (SPM) package that enables developers using ","type":"text"},{"inlineContent":[{"type":"text","text":"Xcode 16"}],"type":"strong"},{"type":"text","text":" to easily add in-app purchase"},{"text":" ","type":"text"},{"type":"text","text":"support to "},{"type":"strong","inlineContent":[{"text":"iOS 17+","type":"text"}]},{"text":" and ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"macOS 14.6+"}]},{"text":" SwiftUI apps.","type":"text"}],"kind":"symbol","images":[{"identifier":"skhelper-logo-small.png","type":"icon"}]},"skhelper-logo-small.png":{"variants":[{"url":"\/images\/SKHelper\/skhelper-logo-small.png","traits":["1x","light"]}],"identifier":"skhelper-logo-small.png","type":"image","alt":null}}}